{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Feedback Mapping Configuration",
  "description": "Maps user feedback intents to system parameters (retrieval, operators, GCG, rewards). Expected gain: Feedback Utilization ≥70%",
  "version": "1.0.0",

  "intent_to_params": {
    "incorrect": {
      "description": "User reports factual incorrectness",
      "retrieval": {
        "alpha": 0.8,
        "beta": 0.2,
        "min_trust_score": 0.7,
        "topK": 20
      },
      "operators": ["verify-facts", "cross-reference", "multi-source-citation"],
      "gcg": {
        "citation_mandatory": true,
        "min_sources": 2,
        "span_copy_only": true
      },
      "reward": {
        "groundedness_weight": 1.5,
        "naturalness_weight": 1.0,
        "originality_weight": 0.8
      }
    },

    "insufficient": {
      "description": "User reports insufficient detail or coverage",
      "retrieval": {
        "alpha": 0.6,
        "beta": 0.4,
        "topK": 15,
        "min_trust_score": 0.5
      },
      "operators": ["expand-context", "multi-view-synthesis", "detail-enhancer"],
      "gcg": {
        "min_sentence_length": 15,
        "structure": "paragraph"
      },
      "reward": {
        "coverage_weight": 1.3,
        "groundedness_weight": 1.2,
        "naturalness_weight": 1.0
      }
    },

    "evidence": {
      "description": "User requests more evidence or sources",
      "retrieval": {
        "alpha": 0.7,
        "beta": 0.3,
        "min_sources": 2,
        "topK": 20
      },
      "operators": ["multi-source-citation", "evidence-lock", "source-diversity"],
      "gcg": {
        "citation_mandatory": true,
        "min_citations_per_paragraph": 1,
        "show_source_names": true
      },
      "reward": {
        "groundedness_weight": 1.4,
        "diversity_weight": 1.2
      }
    },

    "brevity": {
      "description": "User requests shorter, more concise response",
      "retrieval": {
        "topK": 5
      },
      "operators": ["summarize", "cognitive-load-limit", "key-points-extractor"],
      "gcg": {
        "max_sentence_length": 20,
        "structure": "bullet",
        "bullet_max": 5
      },
      "reward": {
        "readability_weight": 1.3,
        "groundedness_weight": 1.1
      }
    },

    "contrast": {
      "description": "User requests alternative perspectives or contrasts",
      "retrieval": {
        "alpha": 0.5,
        "beta": 0.5,
        "topK": 15
      },
      "operators": ["contrast-set-generator", "counterfactual-examples", "alternative-view"],
      "gcg": {
        "structure": "comparative"
      },
      "reward": {
        "diversity_weight": 1.4,
        "originality_weight": 1.2,
        "groundedness_weight": 1.1
      }
    },

    "lexicon": {
      "description": "User reports incorrect terminology or jargon",
      "operators": ["domain-lexicon-fixer", "term-validator"],
      "gcg": {
        "domain_terms_required": true,
        "term_precision": "strict"
      },
      "reward": {
        "compliance_weight": 1.4,
        "naturalness_weight": 1.1
      }
    },

    "structure": {
      "description": "User requests different structure or format",
      "operators": ["structure-reformatter"],
      "gcg": {
        "structure": "user_preferred"
      },
      "reward": {
        "readability_weight": 1.3,
        "tone_consistency_weight": 1.1
      }
    },

    "coverage": {
      "description": "User reports missing aspects or incomplete coverage",
      "retrieval": {
        "alpha": 0.6,
        "beta": 0.4,
        "topK": 20
      },
      "operators": ["multi-aspect-coverage", "gap-filler", "completeness-checker"],
      "reward": {
        "coverage_weight": 1.4,
        "diversity_weight": 1.2
      }
    },

    "tone": {
      "description": "User reports inappropriate tone or style",
      "operators": ["tone-adjuster", "formality-controller"],
      "gcg": {
        "tone": "user_preferred",
        "formality": "user_preferred"
      },
      "reward": {
        "tone_consistency_weight": 1.4,
        "naturalness_weight": 1.1
      }
    },

    "other": {
      "description": "Generic or unclear feedback",
      "retrieval": {
        "alpha": 0.6,
        "beta": 0.4,
        "topK": 10
      },
      "operators": ["general-improver"],
      "reward": {
        "naturalness_weight": 1.2,
        "groundedness_weight": 1.1
      }
    }
  },

  "modifiers": {
    "lexicon_strict": {
      "description": "Enforce strict domain terminology",
      "operators": ["domain-lexicon-fixer"],
      "gcg": {
        "domain_terms_required": true,
        "term_precision": "strict"
      },
      "reward": {
        "compliance_weight": 1.3
      }
    },

    "structure_bullet": {
      "description": "Format as bullet points",
      "gcg": {
        "structure": "bullet",
        "bullet_max": 5
      }
    },

    "structure_paragraph": {
      "description": "Format as paragraphs",
      "gcg": {
        "structure": "paragraph",
        "min_sentence_length": 10
      }
    },

    "structure_table": {
      "description": "Format as table",
      "gcg": {
        "structure": "table"
      }
    },

    "coverage_comprehensive": {
      "description": "Maximize coverage and completeness",
      "retrieval": {
        "topK": 20,
        "min_trust_score": 0.4
      },
      "operators": ["multi-aspect-coverage", "completeness-checker"]
    },

    "brevity_extreme": {
      "description": "Extremely concise response",
      "retrieval": {
        "topK": 3
      },
      "operators": ["ultra-summarize"],
      "gcg": {
        "max_sentence_length": 15,
        "max_sentences": 3
      }
    },

    "evidence_rich": {
      "description": "Rich evidence and citations",
      "retrieval": {
        "topK": 25,
        "min_sources": 3
      },
      "operators": ["multi-source-citation", "evidence-density-enhancer"],
      "gcg": {
        "citation_mandatory": true,
        "min_citations_per_paragraph": 2
      }
    },

    "creative": {
      "description": "Encourage creative and original responses",
      "operators": ["creative-enhancer", "alternative-view"],
      "reward": {
        "originality_weight": 1.5,
        "diversity_weight": 1.3
      }
    },

    "conservative": {
      "description": "Highly grounded, fact-based responses",
      "retrieval": {
        "min_trust_score": 0.8
      },
      "operators": ["fact-verifier", "citation-enforcer"],
      "gcg": {
        "citation_mandatory": true,
        "span_copy_only": true
      },
      "reward": {
        "groundedness_weight": 1.6,
        "compliance_weight": 1.3
      }
    }
  },

  "default_weights": {
    "description": "Default reward weights (baseline)",
    "naturalness": 0.25,
    "groundedness": 0.30,
    "originality": 0.15,
    "compliance": 0.20,
    "tone_consistency": 0.10
  },

  "parameter_constraints": {
    "retrieval": {
      "alpha": { "min": 0.0, "max": 1.0 },
      "beta": { "min": 0.0, "max": 1.0 },
      "topK": { "min": 1, "max": 50 },
      "min_trust_score": { "min": 0.0, "max": 1.0 }
    },
    "reward_weights": {
      "min": 0.0,
      "max": 2.0
    }
  },

  "metadata": {
    "version": "1.0.0",
    "last_updated": "2025-10-09",
    "total_intents": 10,
    "total_modifiers": 9,
    "expected_utilization": "≥70%",
    "reference": "RFC 2025-17, Section 1.6"
  }
}
