# 명령어 역할 분리 (MECE)

## 🎯 설계 원칙

**핵심 질문:**

1. **속도**: 빠른 일상 작업 vs 느린 심층 분석?
2. **빈도**: 매일 vs 주기적?
3. **범위**: 즉시 해결 vs 장기 계획?
4. **승인**: 자동 vs 대화형?

---

## Phase 1: 일상 개발 워크플로우 (Daily)

### `/inspect` - 진단 (Step 1)

**What**: 빠른 건강 체크
**When**: 매일, 개발 시작/종료 시
**Time**: 1-2분
**Output**: `inspection-results.json` (TTL: 5분)

**검사 항목:**

- ✅ TypeScript 에러 (즉시 수정 필요)
- ✅ ESLint/Prettier (즉시 수정 가능)
- ✅ 테스트 실패 (즉시 수정 필요)
- ✅ 보안 취약점 (Critical만)

**특징:**

- 빠른 표면 스캔
- 즉시 해결 가능한 것만
- 장기 부채는 무시

---

### `/maintain` - 자동 수정 (Step 2)

**What**: 승인 불필요한 자동 수정
**When**: `/inspect` 직후
**Time**: 2-5분
**Approval**: ❌ 불필요

**수행 작업:**

- ✅ Prettier + ESLint --fix
- ✅ 문서 동기화
- ✅ 컴포넌트 레지스트리 갱신
- ✅ 자동 진화 (설계 원칙)

**특징:**

- 100% 안전한 변경만
- 롤백 불필요
- 결정론적

---

### `/fix` - 대화형 수정 (Step 3)

**What**: 승인 필요한 수동 수정
**When**: `/maintain` 직후
**Time**: 5-15분
**Approval**: ✅ 필요

**처리 항목:**

- ⚠️ TypeScript 에러 (로직 변경 필요)
- ⚠️ TODO 마커 (144개)
- ⚠️ FIXME/HACK
- ⚠️ 문서 누락

**특징:**

- 각 항목마다 y/n 승인
- 단일 파일 내 문제
- 즉시 수정 가능

---

### `/ship` - 배포 준비 (Step 4)

**What**: 최종 검증 + 배포
**When**: `/fix` 완료 후
**Time**: 3-5분

**수행 작업:**

- ✅ 전체 테스트
- ✅ 빌드 검증
- ✅ 문서 최종 동기화
- ✅ Git commit + push

---

## Phase 2: 장기 부채 정리 (Weekly/Pre-Release)

### `/radar` - 심층 탐지 (Discovery)

**What**: 숨겨진 기술 부채 발견
**When**: 주 1회, 큰 변경 전
**Time**: 5-10분 (스캔만)
**Action**: ❌ 수정 안 함, 발견만

**검사 항목:**

- 🔍 테스트 커버리지 갭
- 🔍 거대 파일 분석 (품질 vs 구조)
- 🔍 중복 의존성
- 🔍 사용되지 않는 코드
- 🔍 보안 취약점 (전체)
- 🔍 워크어라운드 패턴

**출력:**

```
Health Score: 75/100
P0: 0개
P1: 3개 (구조 문제 - 리팩토링 권장)
P2: 5개 (품질 필수 - 신중 처리)
```

**특징:**

- **발견만** 하고 수정 안 함
- `/inspect`보다 훨씬 깊게
- 장기 계획용 데이터 제공
- 다음: `/refactor`로 처리

**Radar만의 특별한 점:**

1. **품질 영향 분석** - 큰 파일이 왜 큰지 판단
2. **패턴 감지** - TODO보다 깊은 워크어라운드 패턴
3. **아키텍처 관점** - 단일 파일이 아닌 시스템 전체

---

### `/refactor` - 구조 개선 (Execution)

**What**: `/radar`에서 발견한 P1 항목 처리
**When**: `/radar` 실행 후
**Time**: 30분~2시간
**Approval**: ✅ 필요 (고위험 항목)

**처리 항목:**

- 🔧 크로스 모듈 중복
- 🔧 Config 파일 정규화
- 🔧 모듈 경계 위반
- 🔧 Dead code 제거
- 🔧 거대 파일 분리 (P1만)

**특징:**

- 다중 파일 변경
- 구조적 개선
- 고위험 → 스냅샷 + 롤백
- `/fix`보다 훨씬 큼

---

## 🎯 명확한 구분 기준

| 명령어      | 속도 | 빈도   | 범위        | 승인   | 목적          |
| ----------- | ---- | ------ | ----------- | ------ | ------------- |
| `/inspect`  | 빠름 | 매일   | 표면        | 불필요 | 진단          |
| `/maintain` | 빠름 | 매일   | 단일 파일   | 불필요 | 자동 수정     |
| `/fix`      | 중간 | 매일   | 단일 파일   | 필요   | 수동 수정     |
| `/ship`     | 빠름 | 필요시 | 전체        | 불필요 | 배포          |
| `/radar`    | 중간 | 주 1회 | 전체 심층   | 불필요 | **발견만**    |
| `/refactor` | 느림 | 필요시 | 크로스 모듈 | 필요   | **구조 개선** |

---

## 🔄 실제 사용 시나리오

### 시나리오 1: 매일 아침 개발 시작

```bash
/inspect    # 2분 - 건강 체크
/maintain   # 3분 - 자동 수정
/fix        # 10분 - TODO 5개 처리
# 코딩...
/ship       # 5분 - 커밋 & 푸시
```

### 시나리오 2: 주말 기술 부채 정리

```bash
/radar      # 10분 - 심층 스캔
# 결과: P1 11개 발견 (구조 문제)
#       P2 2개 발견 (품질 필수)

/refactor   # 1시간 - P1 항목 처리
/inspect    # 검증
/ship
```

### 시나리오 3: 릴리즈 전 점검

```bash
/radar      # 전체 스캔
# P0 있으면 즉시 수정
# P1 있으면 /refactor로 처리
# P2는 판단 (품질 필수면 유지)

/inspect
/fix
/ship
```

---

## 🚨 핵심 차이점

### `/inspect` vs `/radar`

| 항목            | `/inspect`    | `/radar`             |
| --------------- | ------------- | -------------------- |
| 목적            | 일상 체크     | 심층 탐지            |
| 빈도            | 매일          | 주 1회               |
| 깊이            | 표면          | 아키텍처 레벨        |
| TypeScript 에러 | ✅            | ✅                   |
| ESLint          | ✅            | ✅                   |
| TODO/FIXME      | ✅            | ✅ + 패턴 분석       |
| 테스트 실패     | ✅            | ✅ + 커버리지 갭     |
| 거대 파일       | ❌            | ✅ + 품질 영향 분석  |
| 중복 의존성     | ❌            | ✅                   |
| Dead code       | ❌            | ✅                   |
| 워크어라운드    | 기본만        | 패턴 감지            |
| 실행 시간       | 1-2분         | 5-10분               |
| 출력            | 간단한 리포트 | 상세 분석 + 우선순위 |

### `/fix` vs `/refactor`

| 항목     | `/fix`         | `/refactor`      |
| -------- | -------------- | ---------------- |
| 범위     | 단일 파일      | 크로스 모듈      |
| 예시     | TODO 하나 수정 | 중복 export 10개 |
| 시간     | 5-15분         | 30분~2시간       |
| 위험     | 낮음           | 높음             |
| 안전장치 | 없음           | 스냅샷 + 롤백    |
| 승인     | 항목별         | 계획 전체        |

---

## 💡 설계 철학

### Phase 1 (Daily): "빠르고 안전하게"

- 매일 실행 가능
- 즉시 해결
- 낮은 위험
- 점진적 개선

### Phase 2 (Weekly): "깊고 구조적으로"

- 시간 투자
- 장기 부채
- 아키텍처 개선
- 근본 해결

**핵심:** `/radar`는 **발견**, `/refactor`는 **실행**

---

## 📌 다음 할 일

1. ✅ `/radar.md` 업데이트 - "발견만" 강조
2. ✅ `/refactor.md` 업데이트 - "radar 결과 처리" 명시
3. ✅ `/inspect.md` 업데이트 - "일상용" 강조
4. ⬜ 각 명령어에 "언제 사용" 섹션 추가
5. ⬜ CLAUDE.md에 워크플로우 다이어그램 추가

---

_Last updated: 2025-10-03_
